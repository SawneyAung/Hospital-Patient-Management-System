<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Patient Records</title>
  <link rel="stylesheet" href="/styles/patient-records.css">
</head>
<body>
  <!-- Nav Bar -->
  <nav class="navbar">
      <a href="/admin/dashboard">Dashboard</a>
      <a href="/admin/patient-records">Patient Records</a>
      <a href="/admin/appointments">Appointments</a>
      <a href="/billings">Billings</a>
      <a href="/login"><button>Logout</button></a>
  </nav>

  <div class="register-container">
    <h2>Register New Patient</h2>
    <form action="/admin/patient-records" method="POST">
        <input type="text" name="first_name" placeholder="First Name" required />
        <input type="text" name="last_name" placeholder="Last Name" required />
        <input type="number" name="age" placeholder="Age" required />
        <input type="date" name="date_of_birth" required />
        <input type="text" name="phone_number" placeholder="Phone Number" required />
        <input type="email" name="email" placeholder="Email" required />
        <button type="submit">Register</button>
    </form>
  </div>


  <div class="patient-list-section">
    <h3>Registered Patients</h3>
  
    <% patients.forEach(patient => { %>
      <div class="patient-card">
        <img src="https://via.placeholder.com/60" alt="Patient Image" />
        <div class="patient-details">
          <div class="patient-name-age">
            <%= patient.first_name %> <%= patient.last_name %> - Age <%= patient.age %>
          </div>
          <div class="patient-contact">
            <%= patient.phone_number %> &middot; <%= patient.email %>
          </div>
        </div>
        <div class="patient-actions">
            <a href="/admin/patients/<%= patient.patient_id %>">
              <button>View</button>
            </a>
            <a href="/admin/patients/<%= patient.patient_id %>/edit">
              <button>Edit</button>
            </a>
            <form action="/admin/patients/<%= patient.patient_id %>/delete" method="POST" style="display:inline;">
              <button type="submit" onclick="return confirm('Are you sure you want to delete this patient?');">Delete</button>
            </form>
          </div>
          
      </div>
    <% }) %>
  </div>
  
  <script>
    const urlParams = new URLSearchParams(window.location.search);
    if (urlParams.get('registered') === 'success') {
      alert('âœ… Patient has been successfully registered!');
    }
  </script>
</body>
</html>
